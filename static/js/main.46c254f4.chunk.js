(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{53:function(e,a,t){e.exports=t(79)},58:function(e,a,t){},59:function(e,a,t){},60:function(e,a,t){},61:function(e,a,t){},62:function(e,a,t){},77:function(e,a,t){},78:function(e,a,t){},79:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(24),o=t.n(l),s=(t(58),t(59),t(6)),r=(t(60),t(61),t(62),t(100)),i=t(29),m=t.n(i),u=m.a.initializeApp({apiKey:"AIzaSyAg3MzNLytBLwuohCFEblwO5FxiZRT81Js",authDomain:"whatsapp-clone-aae9e.firebaseapp.com",databaseURL:"https://whatsapp-clone-aae9e.firebaseio.com",projectId:"whatsapp-clone-aae9e",storageBucket:"whatsapp-clone-aae9e.appspot.com",messagingSenderId:"150231501913",appId:"1:150231501913:web:5e406238688f62b84cf548",measurementId:"G-7EK9DQ0T0W"}),d=u.firestore(),h=u.auth(),p=new m.a.auth.GoogleAuthProvider,f=d,E=t(26);var v=function(e){var a,t,l={blue:"#0f3057",blue1:"#00587a",pink_red:"#ff414d",voilet:"#2a3d66",voilet1:"#9d65c9",red:"#ec0101",l_blue:"#318fb5",d_red:"#7d0633",orange1:"#f08a5d",orange:"#ff5722"},o=Object(n.useState)("#800080"),i=Object(s.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)([]),h=Object(s.a)(d,2),p=h[0],v=h[1];return Object(n.useEffect)((function(){u(function(e){var a=Object.keys(e);return e[a[a.length*Math.random()<<0]]}(l))}),[]),Object(n.useEffect)((function(){e.id&&f.collection("Rooms").doc(e.id).collection("Messages").orderBy("timestamp","desc").onSnapshot((function(e){v(e.docs.map((function(e){return e.data()})))}))}),[e.id]),e.addnewchat?c.a.createElement("div",{className:"sidebarchat_add",onClick:function(){var e=prompt("Please enter name of chat name"),a=prompt("Please enter image url");e&&f.collection("Rooms").add({name:e,url:a})}},c.a.createElement("h2",null,"Add new Chat")):c.a.createElement(E.b,{className:"link",to:"/rooms/".concat(e.id)},c.a.createElement("div",{className:"sidebarchat"},c.a.createElement(r.a,{src:""===e.url?"something":e.url,alt:e.name,style:{backgroundColor:m}}),c.a.createElement("div",{className:"sidebarchat_info"},c.a.createElement("h3",null,e.name),c.a.createElement("span",null,null===(a=p[0])||void 0===a?void 0:a.message.substring(0,20),(null===(t=p[0])||void 0===t?void 0:t.message.length)>20&&"..."))))},b=t(91),g=t(92),N=t(93),O=t(94),j=t(95),w=Object(n.createContext)(),S=function(e){var a=e.reducer,t=e.initialState,l=e.children;return c.a.createElement(w.Provider,{value:Object(n.useReducer)(a,t)},l)},_=function(){return Object(n.useContext)(w)},y=t(38),C="SET_USER",R=function(e,a){switch(console.log(a),a.type){case C:return Object(y.a)(Object(y.a)({},e),{},{user:a.user});default:return e}};var k=function(){var e=_(),a=Object(s.a)(e,2),t=a[0].user,l=a[1],o=Object(n.useState)([]),i=Object(s.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(s.a)(d,2),E=p[0],w=p[1];return Object(n.useEffect)((function(){f.collection("Rooms").onSnapshot((function(e){u(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar_header"},c.a.createElement(r.a,{className:"size1",src:null===t||void 0===t?void 0:t.photoURL,onClick:function(){h.signOut().then((function(){l({type:C,user:null})})).catch((function(e){alert(e.message)}))}}),c.a.createElement("div",{className:"sidebar_header_right"},c.a.createElement(b.a,null,c.a.createElement(g.a,{className:"size"})),c.a.createElement(b.a,null,c.a.createElement(N.a,{className:"size"})),c.a.createElement(b.a,null,c.a.createElement(O.a,{className:"size"})))),c.a.createElement("div",{className:"sidebar_search"},c.a.createElement("div",{className:"sidebar_searchcointainer"},c.a.createElement(j.a,null),c.a.createElement("input",{placeholder:"Search or start a new chat",type:"text",value:E,onChange:function(e){w(e.target.value),console.log(e.target.value),console.log("search",E)}}))),c.a.createElement("div",{className:"sidebar_chats"},c.a.createElement(v,{addnewchat:!0}),m.map((function(e){if(e.data.name.toLowerCase().includes(E.toLowerCase())||""===E)return c.a.createElement(v,{key:e.id,id:e.id,url:e.data.url,name:e.data.name})}))))},x=t(96),z=t(97),I=t(98),D=t(5);t(77);var L=function(e){var a,t,l=Object(D.f)(),o=Object(D.g)().roomId,i=Object(n.useState)(""),u=Object(s.a)(i,2),d=u[0],h=u[1],p=Object(n.useState)("0px"),E=Object(s.a)(p,2),v=E[0],g=E[1],N=Object(n.useState)(15),w=Object(s.a)(N,2),S=w[0],y=(w[1],_()),C=Object(s.a)(y,2),R=C[0].user,k=(C[1],Object(n.useState)("")),L=Object(s.a)(k,2),T=L[0],A=L[1],B=Object(n.useState)([]),M=Object(s.a)(B,2),P=M[0],U=M[1];return Object(n.useEffect)((function(){o&&(console.log(o),f.collection("Rooms").doc(o).onSnapshot((function(e){e.data()&&h(e.data().name)})),f.collection("Rooms").doc(o).collection("Messages").orderBy("timestamp","asc").onSnapshot((function(e){U(e.docs.map((function(e){return e.data()}))),console.log(P)})))}),[o]),c.a.createElement("div",{className:"sidechat"},c.a.createElement("div",{className:"sidechat_header"},c.a.createElement(r.a,{className:"size1"}),c.a.createElement("div",{className:"sidechat_header_info"},c.a.createElement("h3",null,d),c.a.createElement("p",null,"Last seen at ",new Date(null===(a=P[P.length-1])||void 0===a||null===(t=a.timestamp)||void 0===t?void 0:t.toDate()).toUTCString())),c.a.createElement("div",{className:"sidechat_header_right"},c.a.createElement(b.a,null,c.a.createElement(j.a,{className:"size"})),c.a.createElement(b.a,null,c.a.createElement(x.a,{className:"size"})),c.a.createElement(b.a,{onClick:function(e){g("0px"===v?"100px":"0px")}},c.a.createElement(O.a,{className:"size"})),c.a.createElement("div",{className:"remove",style:{maxHeight:v},onClick:function(){console.log(l.push("/rooms")),e.removeRoom(o)}},c.a.createElement("p",null,"Remove Room")))),c.a.createElement("div",{className:"sidechat_body"},P.map((function(e){var a;return c.a.createElement("p",{className:"chat_message ".concat(e.name==R.displayName&&"chat_receiver")},c.a.createElement("span",{className:"sidechat_name"},e.name),e.message,c.a.createElement("span",{className:"sidechat_time"},new Date(null===(a=e.timestamp)||void 0===a?void 0:a.toDate()).toUTCString()))}))),c.a.createElement("div",{className:"sidechat_footer"},c.a.createElement(z.a,{className:"message"}),c.a.createElement("form",null,c.a.createElement("input",{placeholder:"Type your message",onChange:function(e){A(e.target.value)},style:{height:"".concat(S,"px")},value:T}),c.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),console.log(T),f.collection("Rooms").doc(o).collection("Messages").add({name:R.displayName,message:T,timestamp:m.a.firestore.FieldValue.serverTimestamp()}),A("")}},"Send the message")),c.a.createElement(I.a,{className:"message"})))},T=t(45),A=t(99);t(78);var B=function(){var e=_(),a=Object(s.a)(e,2);Object(T.a)(a[0]);var t=a[1];return c.a.createElement("div",null,c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login_container"},c.a.createElement("img",{alt:"logo",src:"https://i.pinimg.com/originals/79/dc/31/79dc31280371b8ffbe56ec656418e122.png"}),c.a.createElement("div",{className:"text"},c.a.createElement("h1",null,"Sign in to Whatsapp")),c.a.createElement(A.a,{onClick:function(){h.signInWithPopup(p).then((function(e){t({type:C,user:e.user})})).catch((function(e){alert(e.message)}))},className:"btn"},"Sign In with Google"))))};var M=function(){var e=_(),a=Object(s.a)(e,2),t=a[0].user;return a[1],c.a.createElement("div",null,t?c.a.createElement("div",{className:"main_body"},c.a.createElement(E.a,null,c.a.createElement(k,null),c.a.createElement(D.c,null,c.a.createElement(D.a,{path:"/rooms/:roomId"},c.a.createElement(L,{removeRoom:function(e){f.collection("Rooms").doc(e).delete().then((function(){alert("Room Deleted")}))}}))))):c.a.createElement(B,null))};var P=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,{initialState:{user:null},reducer:R},c.a.createElement(P,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.46c254f4.chunk.js.map