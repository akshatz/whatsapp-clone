(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{41:function(e,a,t){},54:function(e,a,t){e.exports=t(79)},59:function(e,a,t){},60:function(e,a,t){},61:function(e,a,t){},62:function(e,a,t){},77:function(e,a,t){},78:function(e,a,t){},79:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(24),s=t.n(l),r=(t(59),t(60),t(4)),o=(t(61),t(41),t(62),t(101)),i=t(29),m=t.n(i),u=m.a.initializeApp({apiKey:"AIzaSyAg3MzNLytBLwuohCFEblwO5FxiZRT81Js",authDomain:"whatsapp-clone-aae9e.firebaseapp.com",databaseURL:"https://whatsapp-clone-aae9e.firebaseio.com",projectId:"whatsapp-clone-aae9e",storageBucket:"whatsapp-clone-aae9e.appspot.com",messagingSenderId:"150231501913",appId:"1:150231501913:web:5e406238688f62b84cf548",measurementId:"G-7EK9DQ0T0W"}),d=u.firestore(),h=u.auth(),E=new m.a.auth.GoogleAuthProvider,p=d,f=t(25);var b=function(e){var a,t,l={blue:"#0f3057",blue1:"#00587a",pink_red:"#ff414d",voilet:"#2a3d66",voilet1:"#9d65c9",red:"#ec0101",l_blue:"#318fb5",d_red:"#7d0633",orange1:"#f08a5d",orange:"#ff5722"},s=Object(n.useState)("#800080"),i=Object(r.a)(s,2),m=i[0],u=i[1],d=Object(n.useState)([]),h=Object(r.a)(d,2),E=h[0],b=h[1];return Object(n.useEffect)((function(){u(function(e){var a=Object.keys(e);return e[a[a.length*Math.random()<<0]]}(l))}),[]),Object(n.useEffect)((function(){e.id&&p.collection("Rooms").doc(e.id).collection("Messages").orderBy("timestamp","desc").onSnapshot((function(e){b(e.docs.map((function(e){return e.data()})))}))}),[e.id]),e.addnewchat?c.a.createElement("div",{className:"sidebarchat_add",onClick:function(){var e=prompt("Please enter name of chat name"),a=prompt("Please enter image url");e&&p.collection("Rooms").add({name:e,url:a})}},c.a.createElement("h2",null,"Add new Chat")):c.a.createElement(f.b,{className:"link",to:"/rooms/".concat(e.id)},c.a.createElement("div",{className:"sidebarchat"},c.a.createElement(o.a,{src:""===e.url?"something":e.url,alt:e.name,style:{backgroundColor:m}}),c.a.createElement("div",{className:"sidebarchat_info"},c.a.createElement("h3",null,e.name),c.a.createElement("span",null,null===(a=E[0])||void 0===a?void 0:a.message.substring(0,20),(null===(t=E[0])||void 0===t?void 0:t.message.length)>20&&"..."))))},v=t(91),g=t(92),N=t(93),O=t(94),j=t(95),S=Object(n.createContext)(),w=function(e){var a=e.reducer,t=e.initialState,l=e.children;return c.a.createElement(S.Provider,{value:Object(n.useReducer)(a,t)},l)},_=function(){return Object(n.useContext)(S)},y=t(38),C="SET_USER",R=function(e,a){switch(console.log(a),a.type){case C:return Object(y.a)(Object(y.a)({},e),{},{user:a.user});default:return e}};var k=function(){var e=_(),a=Object(r.a)(e,2),t=a[0].user,l=a[1],s=Object(n.useState)([]),i=Object(r.a)(s,2),m=i[0],u=i[1],d=Object(n.useState)(""),E=Object(r.a)(d,2),f=E[0],S=E[1],w=Object(n.useState)(""),y=Object(r.a)(w,2),R=y[0],k=(y[1],Object(n.useState)("")),z=Object(r.a)(k,2);return z[0],z[1],Object(n.useEffect)((function(){p.collection("Rooms").onSnapshot((function(e){u(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),c.a.createElement("div",{className:"sidebar",style:{display:R}},c.a.createElement("div",{className:"sidebar_header"},c.a.createElement(o.a,{className:"size1",src:null===t||void 0===t?void 0:t.photoURL,onClick:function(){h.signOut().then((function(){l({type:C,user:null})})).catch((function(e){alert(e.message)}))}}),c.a.createElement("div",{className:"sidebar_header_right"},c.a.createElement(v.a,null,c.a.createElement(g.a,{className:"size"})),c.a.createElement(v.a,null,c.a.createElement(N.a,{className:"size"})),c.a.createElement(v.a,null,c.a.createElement(O.a,{className:"size"})))),c.a.createElement("div",{className:"sidebar_search"},c.a.createElement("div",{className:"sidebar_searchcointainer"},c.a.createElement(j.a,null),c.a.createElement("input",{placeholder:"Search or start a new chat",type:"text",value:f,onChange:function(e){S(e.target.value),console.log(e.target.value),console.log("search",f)}}))),c.a.createElement("div",{className:"sidebar_chats"},c.a.createElement(b,{addnewchat:!0}),m.map((function(e){if(e.data.name.toLowerCase().includes(f.toLowerCase())||""===f)return c.a.createElement(b,{key:e.id,id:e.id,url:e.data.url,name:e.data.name})}))))};var z=function(){var e=_(),a=Object(r.a)(e,2),t=a[0].user,l=a[1],s=Object(n.useState)([]),i=Object(r.a)(s,2),m=i[0],u=i[1],d=Object(n.useState)(""),E=Object(r.a)(d,2),f=E[0],S=E[1];return Object(n.useEffect)((function(){p.collection("Rooms").onSnapshot((function(e){u(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),c.a.createElement("div",{className:"sidebar1"},c.a.createElement("div",{className:"sidebar_header"},c.a.createElement(o.a,{className:"size1",src:null===t||void 0===t?void 0:t.photoURL,onClick:function(){h.signOut().then((function(){l({type:C,user:null})})).catch((function(e){alert(e.message)}))}}),c.a.createElement("div",{className:"sidebar_header_right"},c.a.createElement(v.a,null,c.a.createElement(g.a,{className:"size"})),c.a.createElement(v.a,null,c.a.createElement(N.a,{className:"size"})),c.a.createElement(v.a,null,c.a.createElement(O.a,{className:"size"})))),c.a.createElement("div",{className:"sidebar_search"},c.a.createElement("div",{className:"sidebar_searchcointainer"},c.a.createElement(j.a,null),c.a.createElement("input",{placeholder:"Search or start a new chat",type:"text",value:f,onChange:function(e){S(e.target.value),console.log(e.target.value),console.log("search",f)}}))),c.a.createElement("div",{className:"sidebar_chats"},c.a.createElement(b,{addnewchat:!0}),m.map((function(e){if(e.data.name.toLowerCase().includes(f.toLowerCase())||""===f)return c.a.createElement(b,{key:e.id,id:e.id,url:e.data.url,name:e.data.name})}))))},x=t(96),I=t(97),L=t(98),D=t(99),T=t(6);t(77);var A=function(e){var a,t,l=Object(T.f)(),s=Object(T.g)().roomId,i=Object(n.useState)(""),u=Object(r.a)(i,2),d=u[0],h=u[1],E=Object(n.useState)(""),b=Object(r.a)(E,2),g=b[0],N=b[1],S=Object(n.useState)("0px"),w=Object(r.a)(S,2),y=w[0],C=w[1],R=Object(n.useState)(15),k=Object(r.a)(R,2),z=k[0],A=(k[1],_()),B=Object(r.a)(A,2),M=B[0].user,U=(B[1],Object(n.useState)("")),P=Object(r.a)(U,2),W=P[0],F=P[1],G=Object(n.useState)([]),J=Object(r.a)(G,2),K=J[0],H=J[1];return Object(n.useEffect)((function(){s&&(console.log(s),p.collection("Rooms").doc(s).onSnapshot((function(e){e.data()&&(h(e.data().name),N(e.data().url))})),p.collection("Rooms").doc(s).collection("Messages").orderBy("timestamp","asc").onSnapshot((function(e){H(e.docs.map((function(e){return e.data()}))),console.log(K)})))}),[s]),c.a.createElement("div",{className:"sidechat"},c.a.createElement("div",{className:"sidechat_header"},c.a.createElement(f.b,{to:"/rooms"},c.a.createElement(v.a,null,c.a.createElement(x.a,{className:"size"}))),c.a.createElement(o.a,{className:"size1",src:g}),c.a.createElement("div",{className:"sidechat_header_info"},c.a.createElement("h3",null,d),c.a.createElement("p",null,"Last seen at",new Date(null===(a=K[K.length-1])||void 0===a||null===(t=a.timestamp)||void 0===t?void 0:t.toDate()).toUTCString())),c.a.createElement("div",{className:"sidechat_header_right"},c.a.createElement(v.a,null,c.a.createElement(j.a,{className:"size"})),c.a.createElement(v.a,null,c.a.createElement(I.a,{className:"size"})),c.a.createElement(v.a,{onClick:function(e){C("0px"===y?"100px":"0px")}},c.a.createElement(O.a,{className:"size"})),c.a.createElement("div",{className:"remove",style:{maxHeight:y},onClick:function(){console.log(l.push("/rooms")),e.removeRoom(s)}},c.a.createElement("p",null,"Remove Room")))),c.a.createElement("div",{className:"sidechat_body"},K.map((function(e){var a;return c.a.createElement("p",{className:"chat_message ".concat(e.name==M.displayName&&"chat_receiver")},c.a.createElement("span",{className:"sidechat_name"},e.name),e.message,c.a.createElement("span",{className:"sidechat_time"},new Date(null===(a=e.timestamp)||void 0===a?void 0:a.toDate()).toUTCString()))}))),c.a.createElement("div",{className:"sidechat_footer"},c.a.createElement(L.a,{className:"message"}),c.a.createElement("form",null,c.a.createElement("input",{placeholder:"Type your message",onChange:function(e){F(e.target.value)},style:{height:"".concat(z,"px")},value:W}),c.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),console.log(W),p.collection("Rooms").doc(s).collection("Messages").add({name:M.displayName,message:W,timestamp:m.a.firestore.FieldValue.serverTimestamp()}),F("")}},"Send the message")),c.a.createElement(D.a,{className:"message"})))},B=t(47),M=t(100);t(78);var U=function(){var e=_(),a=Object(r.a)(e,2);Object(B.a)(a[0]);var t=a[1];return c.a.createElement("div",null,c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login_container"},c.a.createElement("img",{alt:"logo",src:"https://i.pinimg.com/originals/79/dc/31/79dc31280371b8ffbe56ec656418e122.png"}),c.a.createElement("div",{className:"text"},c.a.createElement("h1",null,"Sign in to Whatsapp")),c.a.createElement(M.a,{onClick:function(){h.signInWithPopup(E).then((function(e){t({type:C,user:e.user})})).catch((function(e){alert(e.message)}))},className:"btn"},"Sign In with Google"))))};var P=function(){var e=_(),a=Object(r.a)(e,2),t=a[0].user;return a[1],c.a.createElement("div",null,t?c.a.createElement("div",{className:"main_body"},c.a.createElement(f.a,null,c.a.createElement(T.c,null,c.a.createElement(T.a,{path:"/rooms",exact:!0},c.a.createElement(z,null)),c.a.createElement(T.a,{path:"/rooms/:roomId"},c.a.createElement(k,null),c.a.createElement(A,{removeRoom:function(e){p.collection("Rooms").doc(e).delete().then((function(){alert("Room Deleted")}))}}))))):c.a.createElement(U,null))};var W=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(P,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,{initialState:{user:"null"},reducer:R},c.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.a18766d8.chunk.js.map